{"version":3,"sources":["all.js"],"names":["$","console","log","api_path","token","categoryAry","allProducts","pdtList","document","querySelector","categorySelect","cartList","addEventListener","e","preventDefault","target","nodeName","dataset","num","addItemToCart","renderSelectData","value","cart","deleteCartId","initView","getProductList","getCartList","cartId","url","axios","then","response","data","status","renderCartData","carts","error","get","products","JSON","parse","stringify","renderPdtData","temp","forEach","item","push","category","Array","from","Set","renderSelect","cartData","str","product","images","title","price","quantity","id","innerHTML","selData","filterAry","filter","origin_price","post","productId"],"mappings":"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","file":"all.js","sourcesContent":["$(function () {\n  console.log(\"Hello Bootstrap5\");\n});\n\n// variables\nconst api_path = \"yurit630\";\nconst token = \"pI1fp1SJC0XQfpViyEBA5VJlqkv2\";\nlet categoryAry = [];\nlet allProducts = [];\n//dom\nconst pdtList = document.querySelector(\".pdtList\");\nconst categorySelect = document.querySelector(\".categorySelect\");\nconst cartList = document.querySelector(\".cartList\");\n\n// 監聽\npdtList.addEventListener(\"click\", (e) => {\n  e.preventDefault;\n  if (e.target.nodeName != \"A\") return;\n  console.log(e.target.dataset.num);\n  addItemToCart(e.target.dataset.num);\n});\n\ncategorySelect.addEventListener(\"change\", (e) => {\n  renderSelectData(e.target.value);\n});\n\ncartList.addEventListener(\"click\", (e) => {\n  if (e.target.nodeName != \"I\") return;\n  console.log(e.target.dataset.cart);\n  deleteCartId(e.target.dataset.cart);\n});\n\ninitView();\n\nfunction initView() {\n  getProductList();\n  getCartList();\n}\n\n// 刪除特定產品\nfunction deleteCartId(cartId) {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${cartId}`;\n  axios\n    .delete(url)\n    .then(function (response) {\n      // 成功會回傳的內容\n      if (response.data.status) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      // 失敗會回傳的內容\n      console.log(error);\n    });\n}\n\n// 取得產品列表\nfunction getProductList() {\n  axios\n    .get(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`\n    )\n    .then(function (response) {\n      if (response.data.status === true) {\n        let products = response.data.products;\n        allProducts = JSON.parse(JSON.stringify(products));\n        renderPdtData(products);\n        // 產品有的種類\n        let temp = [];\n        products.forEach((item) => {\n          temp.push(item.category);\n        });\n        categoryAry = Array.from(new Set(temp));\n        renderSelect(categoryAry);\n      }\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    });\n}\n\n// 取得購物車列表\nfunction getCartList() {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\n  axios\n    .get(url)\n    .then(function (response) {\n      if (response.data.status === true) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    });\n}\n\n// 渲染購物車\nfunction renderCartData(cartData) {\n  let str = \"\";\n  cartData.forEach((item) => {\n    str += `          \n    <tr class=\"tableCart\">\n            <td scope=\"row\" class=\"d-flex align-items-center\">\n              <img\n                class=\"cartImg d-none d-md-block\"\n                src=\"${item.product.images}\"\n                alt=\"${item.product.title}\"\n              />\n              <h3 class=\"h4 d-inline-block ms-md-6 mb-0\">\n                ${item.product.title}\n              </h3>\n            </td>\n            <td>NT$${item.product.price}</td>\n            <td>${item.quantity}</td>\n            <td>NT$${item.product.price}</td>\n            <td>\n              <a class=\"#\" \n                ><i data-cart=\"${item.id}\" class=\"fas fa-times\" style=\"font-size: 24px\"></i>\n              </a>\n            </td>\n          </tr>`;\n  });\n  cartList.innerHTML = str;\n}\n\n// 渲染Select : 種類\nfunction renderSelect(selData) {\n  let str =\n    '<option selected disabled>請選擇種類</option><option value=\"all\">全部</option>';\n  selData.forEach((item) => {\n    str += `\n    <option value=\"${item}\">${item}</option>\n    `;\n  });\n  categorySelect.innerHTML = str;\n}\n\n// 渲染Select 選擇資料後的畫面\nfunction renderSelectData(category) {\n  let filterAry = [];\n  if (category !== \"all\") {\n    filterAry = allProducts.filter((item) => {\n      if (category === item.category) {\n        console.log(item.category);\n        return item;\n      }\n    });\n  } else {\n    filterAry = allProducts;\n  }\n  renderPdtData(filterAry);\n}\n\nfunction renderPdtData(data) {\n  let str = \"\";\n  data.forEach((item) => {\n    str += `\n        <li class=\"col mt-0 mb-11\">\n      <div class=\"card h-100 border-0 position-relative\">\n        <span\n          class=\"\n            pdtBadge\n            badge\n            rounded-0\n            bg-primary\n            position-absolute\n            top-10\n            start-85\n            translate-middle\n          \"\n          >新品</span\n        >\n        <img\n          src=\"${item.images}\"\n          class=\"card-img-top\"\n          alt=\"${item.title}\"\n        />\n        <div class=\"card-body p-0\">\n          <a class=\"btn btn-primary w-100 rounded-0 fz-4 py-3 mb-3\" href=\"#\" data-num=\"${item.id}\"\n            >加入購物車</a\n          >\n          <h3 class=\"h4\" data-category=\"${item.category}\">${item.title}</h3>\n          <p class=\"h4 text-decoration-line-through mb-0\">${item.origin_price}</p>\n          <p class=\"h2 fw-bold mb-0\">${item.price}</p>\n        </div>\n      </div>\n    </li>\n    `;\n  });\n  pdtList.innerHTML = str;\n}\n\nfunction addItemToCart(cartId) {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\n  axios\n    .post(url, {\n      data: {\n        productId: `${cartId}`,\n        quantity: 1,\n      },\n    })\n    .then(function (response) {\n      if (response.data.status) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    });\n}\n"]}