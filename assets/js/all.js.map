{"version":3,"sources":["all.js"],"names":["$","console","log","api_path","token","categoryAry","allProducts","pdtList","document","querySelector","categorySelect","cartList","deleteBtn","addEventListener","e","preventDefault","target","nodeName","dataset","num","addItemToCart","renderSelectData","value","deleteCartId","cart","deleteAllCarts","initView","getProductList","getCartList","url","axios","then","response","data","status","renderCartData","carts","error","cartId","get","products","JSON","parse","stringify","renderPdtData","temp","forEach","item","push","category","Array","from","Set","renderSelect","cartData","str","total","product","images","title","price","quantity","id","innerHTML","totalAmount","selData","filterAry","filter","origin_price","post","productId"],"mappings":"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","file":"all.js","sourcesContent":["$(function () {\n  console.log(\"Hello Bootstrap5\");\n});\n\n// variables\nconst api_path = \"yurit630\";\nconst token = \"pI1fp1SJC0XQfpViyEBA5VJlqkv2\";\nlet categoryAry = [];\nlet allProducts = [];\n//dom\nconst pdtList = document.querySelector(\".pdtList\");\nconst categorySelect = document.querySelector(\".categorySelect\");\nconst cartList = document.querySelector(\".cartList\");\nconst deleteBtn = document.querySelector(\".deleteBtn\");\n\n// 監聽\npdtList.addEventListener(\"click\", (e) => {\n  e.preventDefault;\n  if (e.target.nodeName != \"A\") return;\n  console.log(e.target.dataset.num);\n  addItemToCart(e.target.dataset.num);\n});\n\ncategorySelect.addEventListener(\"change\", (e) => {\n  renderSelectData(e.target.value);\n});\n\ncartList.addEventListener(\"click\", (e) => {\n  if (e.target.nodeName != \"I\") return;\n  deleteCartId(e.target.dataset.cart);\n});\n\ndeleteBtn.addEventListener(\"click\", (e) => {\n  e.preventDefault;\n  deleteAllCarts();\n});\n\ninitView();\n\nfunction initView() {\n  getProductList();\n  getCartList();\n}\n\n// 刪除購物車全部品項\nfunction deleteAllCarts() {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\n  axios\n    .delete(url)\n    .then(function (response) {\n      // 成功會回傳的內容\n      if (response.data.status) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      // 失敗會回傳的內容\n      console.log(error);\n    });\n}\n\n// 刪除購物車特定產品\nfunction deleteCartId(cartId) {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${cartId}`;\n  axios\n    .delete(url)\n    .then(function (response) {\n      // 成功會回傳的內容\n      if (response.data.status) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      // 失敗會回傳的內容\n      console.log(error);\n    });\n}\n\n// 取得產品列表\nfunction getProductList() {\n  axios\n    .get(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`\n    )\n    .then(function (response) {\n      if (response.data.status === true) {\n        let products = response.data.products;\n        allProducts = JSON.parse(JSON.stringify(products));\n        renderPdtData(products);\n        // 產品有的種類\n        let temp = [];\n        products.forEach((item) => {\n          temp.push(item.category);\n        });\n        categoryAry = Array.from(new Set(temp));\n        renderSelect(categoryAry);\n      }\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    });\n}\n\n// 取得購物車列表\nfunction getCartList() {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\n  axios\n    .get(url)\n    .then(function (response) {\n      if (response.data.status === true) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n\n// 渲染購物車商品列表\nfunction renderCartData(cartData) {\n  let str = \"\";\n  let total = 0;\n  // 購物車商品\n  cartData.forEach((item) => {\n    str += `          \n    <tr class=\"tableCart\">\n            <td scope=\"row\" class=\"d-flex align-items-center\">\n              <img\n                class=\"cartImg d-none d-md-block\"\n                src=\"${item.product.images}\"\n                alt=\"${item.product.title}\"\n              />\n              <h3 class=\"h4 d-inline-block ms-md-6 mb-0\">\n                ${item.product.title}\n              </h3>\n            </td>\n            <td>NT$${item.product.price}</td>\n            <td>${item.quantity}</td>\n            <td>NT$${item.product.price}</td>\n            <td>\n              <a href=\"#\" class=\"btn btn-link\"\n                ><i data-cart=\"${item.id}\" class=\"fas fa-times\" style=\"font-size: 24px\"></i>\n              </a>\n            </td>\n          </tr>`;\n    total += item.quantity * item.product.price;\n  });\n  cartList.innerHTML = str;\n  console.log(\"total\", total);\n  const totalAmount = document.querySelector(\".totalAmount\");\n  totalAmount.innerHTML = `NT$ ${total}`;\n}\n\n// 渲染Select : 種類\nfunction renderSelect(selData) {\n  let str =\n    '<option selected disabled>請選擇種類</option><option value=\"all\">全部</option>';\n  selData.forEach((item) => {\n    str += `\n    <option value=\"${item}\">${item}</option>\n    `;\n  });\n  categorySelect.innerHTML = str;\n}\n\n// 渲染Select 選擇資料後的畫面\nfunction renderSelectData(category) {\n  let filterAry = [];\n  if (category !== \"all\") {\n    filterAry = allProducts.filter((item) => {\n      if (category === item.category) {\n        console.log(item.category);\n        return item;\n      }\n    });\n  } else {\n    filterAry = allProducts;\n  }\n  renderPdtData(filterAry);\n}\n\n// 渲染產品清單\nfunction renderPdtData(data) {\n  let str = \"\";\n  data.forEach((item) => {\n    str += `\n        <li class=\"col mt-0 mb-11\">\n      <div class=\"card h-100 border-0 position-relative\">\n        <span\n          class=\"\n            pdtBadge\n            badge\n            rounded-0\n            bg-primary\n            position-absolute\n            top-10\n            start-85\n            translate-middle\n          \"\n          >新品</span\n        >\n        <img\n          src=\"${item.images}\"\n          class=\"card-img-top\"\n          alt=\"${item.title}\"\n        />\n        <div class=\"card-body p-0\">\n          <a class=\"btn btn-primary w-100 rounded-0 fz-4 py-3 mb-3\" href=\"#\" data-num=\"${item.id}\"\n            >加入購物車</a\n          >\n          <h3 class=\"h4\" data-category=\"${item.category}\">${item.title}</h3>\n          <p class=\"h4 text-decoration-line-through mb-0\">NT$${item.origin_price}</p>\n          <p class=\"h2 fw-bold mb-0\">NT$${item.price}</p>\n        </div>\n      </div>\n    </li>\n    `;\n  });\n  pdtList.innerHTML = str;\n}\n\n// 將單一商品加入購物車列表\nfunction addItemToCart(cartId) {\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\n  axios\n    .post(url, {\n      data: {\n        productId: `${cartId}`,\n        quantity: 1,\n      },\n    })\n    .then(function (response) {\n      if (response.data.status) {\n        renderCartData(response.data.carts);\n      }\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    });\n}\n"]}